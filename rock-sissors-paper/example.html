<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #333;
            color: white;
        }
        .game-container {
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }
        .frame {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            background-color: #3c3836;
            transition: transform 0.5s ease;
            transform: translateX(100%);
        }
        .frame.active {
            transform: translateX(0);
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }
        p {
            text-align: center;
            margin: 10px 0;
            font-size: 14px;
            line-height: 1.5;
        }
        .game-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            overflow-y: auto;
            padding-bottom: 160px; /* ì ìˆ˜íŒ ë†’ì´ë§Œí¼ ì—¬ë°± */
        }
        .choices {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            width: 100%;
        }
        .choice {
            width: 100px;
            height: 100px;
            border: none;
            border-radius: 50%;
            background-color: #3c3836;
            font-size: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .choice-label {
            background-color: #ffc0cb;
            color: black;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-top: 5px;
            text-align: center;
        }
        .rabbit {
            font-size: 40px;
            margin: 20px 0;
        }
        .speech-bubble {
            position: relative;
            background-color: white;
            border-radius: 20px;
            padding: 10px 15px;
            color: black;
            font-size: 14px;
            max-width: 200px;
            text-align: center;
            margin: 10px auto;
        }
        .speech-bubble:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: white;
            border-bottom: 0;
            margin-left: -10px;
            margin-bottom: -10px;
        }
        .score-table {
            width: 100%;
            max-width: 300px;
            background-color: #ffccd5;
            color: black;
            border-radius: 10px 10px 0 0;
            padding: 10px;
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
        }
        .score-row {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 5px 0;
        }
        .score-cell {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .score-label {
            width: 20px;
            text-align: center;
            font-weight: bold;
        }
        .score-header {
            text-align: center;
            font-size: 14px;
            margin-bottom: 5px;
        }
        .btn-restart {
            background-color: #ff6b8b;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
        }
        .sparkle {
            font-size: 24px;
            position: absolute;
            animation: sparkle 1s infinite;
        }
        @keyframes sparkle {
            0% { opacity: 0; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="game-container" id="game-container">
        <!-- í”„ë ˆì„ 1: ì¸íŠ¸ë¡œ -->
        <div class="frame active" id="frame1">
            <h1>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</h1>
            <div class="game-content">
                <p>PLAYERë‹˜ì„ ìœ„í•œ íŠ¹ë³„í•œ<br>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„ì„<br>ì»´í“¨í„°ì™€ ëŒ€ê²°í•˜ê²Œ ë  ê²ë‹ˆë‹¤.<br>ì»´í“¨í„°ì™€ì˜ ëŒ€ê²°ì— ì¤€ë¹„í•˜ì„¸ìš”!</p>
                <div class="rabbit">ğŸ°</div>
                <button class="btn-restart" onclick="showFrame(2)">ì‹œì‘í•˜ê¸°</button>
            </div>
        </div>

        <!-- í”„ë ˆì„ 2: ì„ íƒ í™”ë©´ -->
        <div class="frame" id="frame2">
            <h1>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</h1>
            <div class="game-content">
                <p>ì–´ë–¤ê²ƒìœ¼ë¡œ ê²Œì„ í• ì§€<br>ì„ íƒí•´ì£¼ì„¸ìš”!</p>
                <div class="choices">
                    <div>
                        <div class="choice" onclick="selectChoice('ê°€ìœ„')">âœŒï¸</div>
                        <div class="choice-label">ê°€ìœ„</div>
                    </div>
                    <div>
                        <div class="choice" onclick="selectChoice('ë°”ìœ„')">âœŠ</div>
                        <div class="choice-label">ë°”ìœ„</div>
                    </div>
                    <div>
                        <div class="choice" onclick="selectChoice('ë³´')">âœ‹</div>
                        <div class="choice-label">ë³´</div>
                    </div>
                </div>
            </div>
            <!-- ì ìˆ˜íŒì€ ê³µí†µ ìš”ì†Œë¡œ scriptì—ì„œ ì¶”ê°€ë¨ -->
        </div>

        <!-- í”„ë ˆì„ 3: ì»´í“¨í„° ì„ íƒ ë° ê²°ê³¼ í™”ë©´ -->
        <div class="frame" id="frame3">
            <h1>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</h1>
            <div class="game-content">
                <p>PLAYERì˜ ì„ íƒ</p>
                <div class="choice" id="user-choice-display">âœŒï¸</div>
                <div class="choice-label" id="user-choice-label">ê°€ìœ„</div>
                
                <p>ì»´í“¨í„°ì˜ ì„ íƒ</p>
                <div class="choice" id="computer-choice-display">âœŠ</div>
                <div class="choice-label" id="computer-choice-label">ë°”ìœ„</div>
                
                <div class="rabbit">ğŸ°</div>
                <div class="speech-bubble" id="result-message">ì¡ŒìŠµë‹ˆë‹¤! ã… _ã… </div>
                
                <button class="btn-restart" onclick="nextRound()">ë‹¤ìŒê²Œì„</button>
            </div>
            <!-- ì ìˆ˜íŒì€ ê³µí†µ ìš”ì†Œë¡œ scriptì—ì„œ ì¶”ê°€ë¨ -->
        </div>

        <!-- í”„ë ˆì„ 4: ìµœì¢… ê²°ê³¼ í™”ë©´ -->
        <div class="frame" id="frame4">
            <h1>ê°€ìœ„ë°”ìœ„ë³´ ê²Œì„</h1>
            <div class="game-content">
                <div id="sparkles-container"></div>
                <div class="rabbit">ğŸ°</div>
                <div class="speech-bubble" id="final-message">PLAYERì˜ ìŠ¹ë¦¬! ì¶•í•˜í•©ë‹ˆë‹¤! ^^</div>
                <button class="btn-restart" id="restart-button" onclick="resetGame()">ì²˜ìŒë¶€í„°</button>
            </div>
            <!-- ì ìˆ˜íŒì€ ê³µí†µ ìš”ì†Œë¡œ scriptì—ì„œ ì¶”ê°€ë¨ -->
        </div>
    </div>

    <script>
        // ê²Œì„ ë³€ìˆ˜
        let currentFrame = 1;
        let gameResults = Array(10).fill(null); // 10íŒì˜ ê²°ê³¼ë¥¼ ì €ì¥í•  ë°°ì—´
        let currentRound = 0;
        let userChoice = '';
        let computerChoice = '';
        
        // ê³µí†µ ì ìˆ˜íŒ ìƒì„±
        function createScoreTable() {
            const scoreTable = document.createElement('div');
            scoreTable.className = 'score-table';
            scoreTable.id = 'score-table';
            
            const scoreHeader = document.createElement('div');
            scoreHeader.className = 'score-header';
            scoreHeader.textContent = 'í˜„ì¬ ìŠ¹/íŒ¨';
            scoreTable.appendChild(scoreHeader);
            
            // U í–‰ (í”Œë ˆì´ì–´)
            const uRow = document.createElement('div');
            uRow.className = 'score-row';
            
            const uLabel = document.createElement('div');
            uLabel.className = 'score-label';
            uLabel.textContent = 'U';
            uRow.appendChild(uLabel);
            
            for (let i = 1; i <= 10; i++) {
                const cell = document.createElement('div');
                cell.className = 'score-cell';
                cell.setAttribute('data-index', i);
                cell.textContent = i;
                uRow.appendChild(cell);
            }
            scoreTable.appendChild(uRow);
            
            // C í–‰ (ì»´í“¨í„°)
            const cRow = document.createElement('div');
            cRow.className = 'score-row';
            
            const cLabel = document.createElement('div');
            cLabel.className = 'score-label';
            cLabel.textContent = 'C';
            cRow.appendChild(cLabel);
            
            for (let i = 1; i <= 10; i++) {
                const cell = document.createElement('div');
                cell.className = 'score-cell';
                cell.setAttribute('data-index', i);
                cell.textContent = i;
                cRow.appendChild(cell);
            }
            scoreTable.appendChild(cRow);
            
            return scoreTable;
        }
        
        // í”„ë ˆì„ ì „í™˜ í•¨ìˆ˜
        function showFrame(frameNumber) {
            const frames = document.querySelectorAll('.frame');
            frames.forEach(frame => {
                frame.classList.remove('active');
            });
            document.getElementById('frame' + frameNumber).classList.add('active');
            currentFrame = frameNumber;
            
            // ì²« ë²ˆì§¸ í”„ë ˆì„ì„ ì œì™¸í•œ ëª¨ë“  í”„ë ˆì„ì— ì ìˆ˜íŒ ì¶”ê°€
            if (frameNumber > 1) {
                updateScoreDisplay();
            }
        }
        
        // ì‚¬ìš©ì ì„ íƒ í•¨ìˆ˜
        function selectChoice(choice) {
            userChoice = choice;
            computerChoice = getComputerChoice();
            
            // ì´ëª¨ì§€ ë§¤í•‘
            const choiceEmojis = {
                'ê°€ìœ„': 'âœŒï¸',
                'ë°”ìœ„': 'âœŠ',
                'ë³´': 'âœ‹'
            };
            
            // í™”ë©´ì— ì„ íƒ í‘œì‹œ
            document.getElementById('user-choice-display').innerHTML = choiceEmojis[userChoice];
            document.getElementById('user-choice-label').textContent = userChoice;
            document.getElementById('computer-choice-display').innerHTML = choiceEmojis[computerChoice];
            document.getElementById('computer-choice-label').textContent = computerChoice;
            
            // ìŠ¹íŒ¨ ê²°ì •
            const result = checkWinner(userChoice, computerChoice);
            let resultMessage = '';
            
            if (result === 'win') {
                resultMessage = 'ì´ê²¼ìŠµë‹ˆë‹¤! ^^';
                gameResults[currentRound] = 'win';
            } else if (result === 'lose') {
                resultMessage = 'ì¡ŒìŠµë‹ˆë‹¤! ã… _ã… ';
                gameResults[currentRound] = 'lose';
            } else {
                resultMessage = 'ë¹„ê²¼ìŠµë‹ˆë‹¤! ^_^';
                gameResults[currentRound] = 'draw';
            }
            
            document.getElementById('result-message').textContent = resultMessage;
            currentRound++;
            
            // ê²°ê³¼ í™”ë©´ìœ¼ë¡œ ì „í™˜
            showFrame(3);
            
            // ëª¨ë“  ë¼ìš´ë“œ ì¢…ë£Œ ì‹œ ìµœì¢… ê²°ê³¼ í™”ë©´ ì¤€ë¹„
            if (currentRound >= 10) {
                prepareResultScreen();
            }
        }
        
        // ë‹¤ìŒ ë¼ìš´ë“œ í•¨ìˆ˜
        function nextRound() {
            if (currentRound >= 10) {
                showFrame(4);
            } else {
                showFrame(2);
            }
        }
        
        // ì»´í“¨í„° ì„ íƒ í•¨ìˆ˜
        function getComputerChoice() {
            const choices = ['ê°€ìœ„', 'ë°”ìœ„', 'ë³´'];
            const randomIndex = Math.floor(Math.random() * 3);
            return choices[randomIndex];
        }
        
        // ìŠ¹íŒ¨ ê²°ì • í•¨ìˆ˜
        function checkWinner(user, computer) {
            if (user === computer) {
                return 'draw';
            }
            
            if (
                (user === 'ê°€ìœ„' && computer === 'ë³´') ||
                (user === 'ë°”ìœ„' && computer === 'ê°€ìœ„') ||
                (user === 'ë³´' && computer === 'ë°”ìœ„')
            ) {
                return 'win';
            }
            
            return 'lose';
        }
        
        // ì ìˆ˜ í‘œì‹œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateScoreDisplay() {
            // ê¸°ì¡´ ì ìˆ˜íŒ ì œê±°
            const oldScoreTable = document.getElementById('score-table');
            if (oldScoreTable) {
                oldScoreTable.remove();
            }
            
            // ìƒˆ ì ìˆ˜íŒ ìƒì„±
            const scoreTable = createScoreTable();
            document.getElementById('game-container').appendChild(scoreTable);
            
            // ì ìˆ˜ ì—…ë°ì´íŠ¸
            const userCells = scoreTable.querySelectorAll('.score-row:nth-child(2) .score-cell');
            const compCells = scoreTable.querySelectorAll('.score-row:nth-child(3) .score-cell');
            
            for (let i = 0; i < gameResults.length; i++) {
                if (gameResults[i] === null) continue;
                
                if (gameResults[i] === 'win') {
                    userCells[i].textContent = 'O';
                    userCells[i].style.color = 'blue';
                    compCells[i].textContent = 'X';
                    compCells[i].style.color = 'red';
                } else if (gameResults[i] === 'lose') {
                    userCells[i].textContent = 'X';
                    userCells[i].style.color = 'red';
                    compCells[i].textContent = 'O';
                    compCells[i].style.color = 'blue';
                } else if (gameResults[i] === 'draw') {
                    userCells[i].textContent = '-';
                    compCells[i].textContent = '-';
                }
            }
        }
        
        // ìµœì¢… ê²°ê³¼ í™”ë©´ ì¤€ë¹„ í•¨ìˆ˜
        function prepareResultScreen() {
            let userWins = 0;
            let computerWins = 0;
            
            gameResults.forEach(result => {
                if (result === 'win') userWins++;
                if (result === 'lose') computerWins++;
            });
            
            let finalMessage = '';
            
            if (userWins > computerWins) {
                finalMessage = 'PLAYERì˜ ìŠ¹ë¦¬! ì¶•í•˜í•©ë‹ˆë‹¤! ^^';
                createSparkles();
            } else if (userWins < computerWins) {
                finalMessage = 'PLAYERì˜ íŒ¨ë°°! ë‹¤ìŒì— ë˜ ë„ì „í•˜ì„¸ìš”! ã… _ã… ';
            } else {
                finalMessage = 'ë¬´ìŠ¹ë¶€! ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”! ^_^';
            }
            
            document.getElementById('final-message').textContent = finalMessage;
        }
        
        // ë°˜ì§ì´ íš¨ê³¼ ìƒì„± í•¨ìˆ˜
        function createSparkles() {
            const container = document.getElementById('sparkles-container');
            container.innerHTML = '';
            
            for (let i = 0; i < 10; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.textContent = 'âœ¨';
                sparkle.style.left = Math.random() * 80 + 10 + '%';
                sparkle.style.top = Math.random() * 80 + 10 + '%';
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(sparkle);
            }
        }
        
        // ê²Œì„ ë¦¬ì…‹ í•¨ìˆ˜
        function resetGame() {
            gameResults = Array(10).fill(null);
            currentRound = 0;
            
            // ì ìˆ˜íŒ ì´ˆê¸°í™”
            const oldScoreTable = document.getElementById('score-table');
            if (oldScoreTable) {
                oldScoreTable.remove();
            }
            
            showFrame(1);
        }
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            resetGame();
        });
    </script>
</body>
</html>